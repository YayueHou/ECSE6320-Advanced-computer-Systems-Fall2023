# Implementation of Dictionary Codec

## Introduction
The objective of this project is to implement a dictionary codec. As discussed in class, dictionary encoding is being widely used in real-world data analytics systems to compress data with relatively low cardinality and speed up search/scan operations. In essence, a dictionary encoder scans the to-be-compressed data to build the dictionary that consists of all the unique data items and replaces each data item with its dictionary ID. To accelerate dictionary look-up, one may use certain indexing data structure such as hash-table or B-tree to better manage the dictionary. In addition to reducing the data footprint, dictionary encoding makes it possible to apply SIMD instructions to significantly speed up the search/scan operations.

## Code Structure
+ We use Hash table to accelerate dictionary.
+ **get_num_threads_from_env** : Retrieves the number of threads from the environment variable NUM_THREADS. If the variable is not set, it defaults to 4.
+ **encodor** : This function is responsible for updating a dictionary with unique data items and their corresponding dictionary IDs within a specified range (start to end) of the input data.
It uses a mutex (mtx) to ensure that dictionary updates are synchronized among different threads.
+ **encode** : Divides the input data into chunks and spawns multiple threads to concurrently encode these chunks using the encoder function. It then joins the threads and creates the final encoded data vector using the dictionary generated by the threads.
+ **search** :  Performs a linear search for occurrences of a specific value in the original data.
+ **search_simd** : Utilizes SIMD instructions (AVX2) for a potentially faster search. This function is compiled only if the __AVX2__ macro is defined.
+ **prefix_search** : Searches for data items in the original data that have a specified prefix. Returns a vector of pairs containing the matching strings and their indices.
+ **main** : 
    + Parses command-line arguments for search value, prefix, and the path to the data file.
    + Loads data from the specified file.
    + Measures the time taken for encoding, single-item search, SIMD search (if AVX2 is enabled), and prefix search.
    + Outputs the elapsed times for these operations.

## Experiment Result:

- The test memory size is 128 MB

| Num Threads | Search Prefix Pair | Encoding Time (s) | Search Time (us) | Search SIMD Time (us) | Prefix Search Time (us)  |
|-------------|--------------------|---------------------|----------------|---------------------|---------------------------|
| 1           | abcdefg abc        | 0.148779            | 1.081          | 0.727               | 7.349                  |
| 2           | abcdefg abc        | 0.146871            | 0.848          | 0.745               | 7.956                  |
| 4           | abcdefg abc        | 0.125903            | 1.056          | 0.869               | 7.951                  |
| 8           | abcdefg abc        | 0.121306            | 1.043          | 0.634               | 7.934                  |

- Encoding time decreases as the number of threads increases, indicating that the encoding process benefits from parallelization.
- Search time remains relatively constant across different thread counts for the linear search, suggesting that this operation is not significantly affected by parallelization.
- Search SIMD time also remains relatively constant, indicating that the SIMD-enabled search operation does not show a significant improvement with increased parallelization.
- Prefix search time remains relatively constant, showing minimal variation with the number of threads.